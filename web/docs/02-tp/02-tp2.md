---
id: tp2
title: TP2 - Attaque et défense
sidebar_label: TP2 - Attaque et défense
draft: true
hide_table_of_contents: false
---

# TP2 : capturer des drapeaux

## Linux: le super site web monté vite fait "bien" fait

Bob Smith, un finissant du DEC s'est fait offir 5000 dollars par son oncle pour monter un petit site web
pour l'entreprise familiale de plomberie. Il a:
- créé une machine virtuelle Linux
- parti le serveur Apache
- déposé les fichiers HTML qu'un ami a produit pour le site
- acheté un nom de domaine

Ta mission est la suivante:
```
Modifier la page de contact du site pour que le numéro
de téléphone soit remplacé par 555 555 9876 et le lien
mailto envoient les clients potentiels sur le ouch.hacked@cem.ca.

La personne qui administre le site s'appelle Bob Smith, né le 4 mars 1982 à Sherbrooke.
Il a 3 filles : Jane (5 juin 2001), Patricia (9 nomvembre 2011) et Sophie (10 décemble 2014).

Son courriel est bob@smith.org.

Il a déjà eu dans des fuites de données les hash de mot de passe en md5 non salés:
 - 90fe8213e6ffc82ba6bdea7c7d6bc97c et a6cf8d574e3498e3bb36d5be15b38cda
 - J'ai payé un service de crack qui m'a trouvé les mots de passe "Jane2001!" et "Patricia2011!" 
 - En espérant que ça aidera
 
Je paie 1000$ cash dans une enveloppe brune, échange sur un banc public dans un parc public.
```

Pour partir la machine virtuelle 
- ouvre un explorateur de fichier et va à  \\\ed5depinfo\Logiciels\_Cours\3U4\
- copie le fichier **tp2-linux.7z** sur ton poste de travail
- décompresse le fichier
- ouvre la machine virtuelle fournie avec VMware Workstation
- démarre la machine virtuelle
- tu vas te connecter directement sur la machine depuis l'écran de VMware
- login = guest  password = guest
- ouvre un terminal et tape la commande `ifconfig` pour obtenir l'adresse IP du serveur web
- ouvre un navigateur web sur ta **machine Windows** et tape **http://adresse-IP-du-serveur:8080/** pour voir le site web apparaitre

### Attaque et collecte d'informations

!!! Toute l'attaque doit se faire depuis ton poste Windows. L'attaquant n'a pas accès physique
à la machine Linux. !!!

La première étape consiste à scanner les ports de la machine Linux pour voir quels services sont
disponibles. Tu vas utiliser nmap pour faire ce scan. Voice la commande PowerShell à utiliser:

```powershell
nmap -sV -p 1-65535 adresse-IP-du-serveur
```


Tu vas maintenant essayer d'accomplir ta mission. Si tu bloques, ton prof t'aidera mais il faut que
tu gardes une trace de chaque commande / manipulation que tu utilises pour l'attaque. 

Comme tu vises à devenir un pro, on va aussi te demander comment tu aurais protéger le système pour
qu'il soit résistant aux attaques. 

ATTENTION: ton rapport sera personnel et tu t'exposes à du plagiat si tu reprends des parties d'un 
camarade.

Pour chaque manipulation, tu devras inclure une copie d'écran donc n'hésite pas à en prendre et les
ajouter dans un dossier pendant tes recherches. On s'attend à voir l'écran
- la commande qui t'a permis d'obtenir l'information
- une courte phrase indiquant l'information collectée
- une copie d'écran de l'information

### Ton rapport en mode "faille, exploit, fix"

#### Faille **1point**

Tu dois décrire la faille de sécurité que tu as exploitée.

#### Exploit **6 points**

Tu dois décrire les étapes en détails que tu as suivies pour exploiter la faille.
- les commandes effectuées
- les outils utilisés si nécessaire
- une copie d'écran de la commande / résultat

#### Correctif **4 points**

Tu dois proposer plusieurs correctifs permettant de briser l'exploit que tu as utilisé.

Tu dois en documenter au moins 2 en expliquant pour chacun quelle étape de l'exploit il brise et en incluant
une copie d'écran de l'exploit qui ne fonctionne plus.

Les correctifs peuvent concerner : le pare-feu et l'accès réseau, les permissions des fichiers, les sauvegardes, les stratégies de mot de passe, les antivirus etc.

### Modèle de rapport

```markdown
# Travail 2 par *nom* *prénom* *groupe*

## Faille 

Le serveur est vulnérable ...

## Attaque (exploit)

Voici les étapes détaillées pour pouvoir modifier le courriel / téléphone sur la page demandée:
- Description de l'étape + copie d'écran
- Description de l'étape + copie d'écran
- ...
- ...
   ...
- En rechargeant la page, on constate que le numéro de téléphone a été modifié


## Correctif 1

Commandes à effectuer ou étapes à mettre en place. 

Copie d'écran de l'exploit qui ne fonctionne plus.

## Correctif 2 (ne dépend pas du correctif 1)

Commandes à effectuer ou étapes à mettre en place.

Copie d'écran de l'exploit qui ne fonctionne plus. 

```


https://www.stationx.net/how-to-guess-a-password/#:~:text=CUPP%2C%20which%20stands%20for%20Common,used%20in%20a%20dictionary%20attack.
